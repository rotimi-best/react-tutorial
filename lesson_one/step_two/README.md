# Lesson 1 - Part 2 - Component Updating - Basic lifecycle methods

## Goal

В этом уроке мы узнаем, как обновить компонент. Для этого у нас есть компонент `<Clock />`, который должен показывать нам правильное время каждую секунду.

> Когда мы передаём `<Clock />` в `ReactDOM.render()`, React вызывает конструктор компонента. Clock должен отображать текущее время, поэтому мы задаём начальное состояние this.state объектом с текущим временем.

## Steps

1. В нашем конструкторе нам нужно инициализировать наше состояние. Он будет иметь значение по умолчанию текущей даты.

    ```javascript
    constructor(props) {
        super(props)

        this.state = {
          date: new Date(),
        }
      }
    ```

2. Первоначальный рендеринг компонента в DOM называется «монтирование» (mounting). Нам нужно устанавливать таймер всякий раз, когда это происходит. Вот поэтому нам нужен `componentDidMount()`.

    ```javascript
    componentDidMount() {
      this.timerID = setInterval(
        () => this.tick(), // Вызывай эту функцию каждую 1 секунду
        1000
      );
    }
    ```

3. Чтобы изменить значение в состоянии, мы должны использовать `this.setState()`

    ```javascript
    tick() {
      this.setState({
        date: new Date(),
      })
    }
    ```

4. Каждый раз когда DOM-узел, созданный компонентом, удаляется, происходит «размонтирование» (unmounting). Чтобы избежать утечки ресурсов, мы будем сбрасывать таймер при каждом «размонтировании». Для этого нам нужен `componentWillUnmount()`

    ```javascript
    componentWillUnmount() {
      clearInterval(this.timerID); // сбрасывай таймер при каждом «размонтировании»
    }
    ```
